var HeaderVideo=function(e,i){var o={container:e(".header-video"),header:e(".header-video--media"),videoTrigger:e("#video-trigger"),videoCloseTrigger:e("#video-close-trigger"),teaserVideo:e("#teaser-video"),autoPlayVideo:!1},r=function(i){o=e.extend(o,i),t(),d(),a(),o.videoCloseTrigger.hide(),videoDetails.teaser&&n(),o.autoPlayVideo&&l()},t=function(){return videoDetails={id:o.header.attr("data-video-src"),teaser:o.header.attr("data-teaser-source"),provider:o.header.attr("data-provider").toLowerCase(),videoHeight:o.header.attr("data-video-height"),videoWidth:o.header.attr("data-video-width")},videoDetails},d=function(){o.container.data("aspectRatio",videoDetails.videoHeight/videoDetails.videoWidth),e(window).resize(function(){var i=e(window).width(),r=e(window).height();o.container.width(i).height(i*o.container.data("aspectRatio")),r<o.container.height()&&o.container.width(i).height(r)}).trigger("resize")},a=function(){o.videoTrigger.on("click",function(e){e.preventDefault(),l(),o.videoCloseTrigger.fadeIn()}),o.videoCloseTrigger.on("click",function(e){e.preventDefault(),s()})},n=function(){if(Modernizr.video&&!f()){var e=videoDetails.teaser,i='<video autoplay="true" loop="loop" muted id="teaser-video" class="teaser-video"><source src="'+e+'.mp4" type="video/mp4"><source src="'+e+'.ogv" type="video/ogg"></video>';o.container.append(i)}},v=function(){if("youtube"===videoDetails.provider)var e='<iframe id="video" src="http://www.youtube.com/embed/'+videoDetails.id+'?rel=0&amp;hd=1&autohide=1&showinfo=0&autoplay=1&enablejsapi=1&origin=*" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';else if("html5"===videoDetails.provider)var e='<video autoplay="true" loop="loop" id="video"><source src="'+videoDetails.id+'.mp4" type="video/mp4"><source src="'+videoDetails.id+'.ogv" type="video/ogg"></video>';return e},l=function(){o.header.hide(),o.container.append(v()),c(),o.teaserVideo.hide()},s=function(){e("#video").remove(),o.teaserVideo.fadeIn(),u(),g()},c=function(){o.videoTrigger&&o.videoTrigger.fadeOut("slow")},u=function(){o.videoTrigger&&o.videoTrigger.fadeIn("slow")},g=function(){o.videoCloseTrigger.hide()},f=function(){return e(window).width()<900&&Modernizr.touch?!0:!1};return{init:r}}(jQuery,document);